/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var qe=Object.create;var le=Object.defineProperty;var et=Object.getOwnPropertyDescriptor;var tt=Object.getOwnPropertyNames;var nt=Object.getPrototypeOf,st=Object.prototype.hasOwnProperty;var it=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),rt=(i,t)=>{for(var e in t)le(i,e,{get:t[e],enumerable:!0})},De=(i,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of tt(t))!st.call(i,s)&&s!==e&&le(i,s,{get:()=>t[s],enumerable:!(n=et(t,s))||n.enumerable});return i};var ot=(i,t,e)=>(e=i!=null?qe(nt(i)):{},De(t||!i||!i.__esModule?le(e,"default",{value:i,enumerable:!0}):e,i)),at=i=>De(le({},"__esModule",{value:!0}),i);var Ze=it((Bt,He)=>{(function(){"use strict";var i=["\u3131","\u3132","\u3134","\u3137","\u3138","\u3139","\u3141","\u3142","\u3143","\u3145","\u3146","\u3147","\u3148","\u3149","\u314A","\u314B","\u314C","\u314D","\u314E"],t=["\u314F","\u3150","\u3151","\u3152","\u3153","\u3154","\u3155","\u3156","\u3157",["\u3157","\u314F"],["\u3157","\u3150"],["\u3157","\u3163"],"\u315B","\u315C",["\u315C","\u3153"],["\u315C","\u3154"],["\u315C","\u3163"],"\u3160","\u3161",["\u3161","\u3163"],"\u3163"],e=["","\u3131","\u3132",["\u3131","\u3145"],"\u3134",["\u3134","\u3148"],["\u3134","\u314E"],"\u3137","\u3139",["\u3139","\u3131"],["\u3139","\u3141"],["\u3139","\u3142"],["\u3139","\u3145"],["\u3139","\u314C"],["\u3139","\u314D"],["\u3139","\u314E"],"\u3141","\u3142",["\u3142","\u3145"],"\u3145","\u3146","\u3147","\u3148","\u314A","\u314B","\u314C","\u314D","\u314E"],n=44032,s=["\u3131","\u3132","\u3133","\u3134","\u3135","\u3136","\u3137","\u3138","\u3139","\u313A","\u313B","\u313C","\u313D","\u313E","\u313F","\u3140","\u3141","\u3142","\u3143","\u3144","\u3145","\u3146","\u3147","\u3148","\u3149","\u314A","\u314B","\u314C","\u314D","\u314E"],o=["\u3131","\u3132","\u3134","\u3137","\u3138","\u3139","\u3141","\u3142","\u3143","\u3145","\u3146","\u3147","\u3148","\u3149","\u314A","\u314B","\u314C","\u314D","\u314E"],a=["\u314F","\u3150","\u3151","\u3152","\u3153","\u3154","\u3155","\u3156","\u3157","\u3158","\u3159","\u315A","\u315B","\u315C","\u315D","\u315E","\u315F","\u3160","\u3161","\u3162","\u3163"],l=["","\u3131","\u3132","\u3133","\u3134","\u3135","\u3136","\u3137","\u3139","\u313A","\u313B","\u313C","\u313D","\u313E","\u313F","\u3140","\u3141","\u3142","\u3144","\u3145","\u3146","\u3147","\u3148","\u314A","\u314B","\u314C","\u314D","\u314E"],u=[["\u3131","\u3145","\u3133"],["\u3134","\u3148","\u3135"],["\u3134","\u314E","\u3136"],["\u3139","\u3131","\u313A"],["\u3139","\u3141","\u313B"],["\u3139","\u3142","\u313C"],["\u3139","\u3145","\u313D"],["\u3139","\u314C","\u313E"],["\u3139","\u314D","\u313F"],["\u3139","\u314E","\u3140"],["\u3142","\u3145","\u3144"]],c=[["\u3157","\u314F","\u3158"],["\u3157","\u3150","\u3159"],["\u3157","\u3163","\u315A"],["\u315C","\u3153","\u315D"],["\u315C","\u3154","\u315E"],["\u315C","\u3163","\u315F"],["\u3161","\u3163","\u3162"]],h,d,p,y,C,_;function D(r){for(var g=r.length,M={0:0},m=0;m<g;m++)r[m]&&(M[r[m].charCodeAt(0)]=m);return M}h=D(s),d=D(o),p=D(a),y=D(l);function K(r){for(var g=r.length,M={},m,x,w=0;w<g;w++)m=r[w][0].charCodeAt(0),x=r[w][1].charCodeAt(0),typeof M[m]=="undefined"&&(M[m]={}),M[m][x]=r[w][2].charCodeAt(0);return M}C=K(u),_=K(c);function z(r){return typeof h[r]!="undefined"}function k(r){return typeof d[r]!="undefined"}function L(r){return typeof p[r]!="undefined"}function Z(r){return typeof y[r]!="undefined"}function V(r){return 44032<=r&&r<=55203}function I(r,g){return _[r]&&_[r][g]?_[r][g]:!1}function $(r,g){return C[r]&&C[r][g]?C[r][g]:!1}var v=function(r,g){if(r===null)throw new Error("Arguments cannot be null");typeof r=="object"&&(r=r.join(""));for(var M=[],m=r.length,x,w,R,A,E,b=0;b<m;b++){var S=[];A=r.charCodeAt(b),V(A)?(A-=n,R=A%28,w=(A-R)/28%21,x=parseInt((A-R)/28/21),S.push(i[x]),typeof t[w]=="object"?S=S.concat(t[w]):S.push(t[w]),R>0&&(typeof e[R]=="object"?S=S.concat(e[R]):S.push(e[R]))):z(A)?(k(A)?E=i[d[A]]:E=e[y[A]],typeof E=="string"?S.push(E):S=S.concat(E)):L(A)?(E=t[p[A]],typeof E=="string"?S.push(E):S=S.concat(E)):S.push(r.charAt(b)),g?M.push(S):M=M.concat(S)}return M},se=function(r){return typeof r!="string"?"":(r=v(r),r.join(""))},ee=function(r){typeof r=="string"&&(r=v(r));var g=[],M=r.length,m,x=0,w=-1,R,A=!1;function E(S){var J,O,P,ce,B=0,ne,Y="";if(A=!1,!(w+1>S))for(var N=1;;N++){if(N===1){if(O=r[w+N].charCodeAt(0),L(O))if(w+N+1<=S&&L(P=r[w+N+1].charCodeAt(0))){g.push(String.fromCharCode(I(O,P))),w=S;return}else{g.push(r[w+N]),w=S;return}else if(!k(O)){g.push(r[w+N]),w=S;return}Y=r[w+N]}else if(N===2)if(P=r[w+N].charCodeAt(0),k(P)){O=$(O,P),Y=String.fromCharCode(O),g.push(Y),w=S;return}else Y=String.fromCharCode((d[O]*21+p[P])*28+n);else N===3?(ce=r[w+N].charCodeAt(0),I(P,ce)?P=I(P,ce):B=ce,Y=String.fromCharCode((d[O]*21+p[P])*28+y[B]+n)):N===4?(ne=r[w+N].charCodeAt(0),$(B,ne)?B=$(B,ne):B=ne,Y=String.fromCharCode((d[O]*21+p[P])*28+y[B]+n)):N===5&&(ne=r[w+N].charCodeAt(0),B=$(B,ne),Y=String.fromCharCode((d[O]*21+p[P])*28+y[B]+n));if(w+N>=S){g.push(Y),w=S;return}}}for(var b=0;b<M;b++){if(m=r[b].charCodeAt(0),!k(m)&&!L(m)&&!Z(m)){E(b-1),E(b),x=0;continue}x===0?k(m)?x=1:L(m)&&(x=4):x==1?L(m)?x=2:$(R,m)?x=5:E(b-1):x==2?Z(m)?x=3:L(m)?I(R,m)||(E(b-1),x=4):(E(b-1),x=1):x==3?Z(m)?!A&&$(R,m)?A=!0:(E(b-1),x=1):k(m)?(E(b-1),x=1):L(m)&&(E(b-2),x=2):x==4?L(m)?I(R,m)?(E(b),x=0):E(b-1):(E(b-1),x=1):x==5&&(L(m)?(E(b-2),x=2):(E(b-1),x=1)),R=m}return E(b-1),g.join("")},X=function(r,g){var M=v(r).join(""),m=v(g).join("");return M.indexOf(m)},je=function(r,g){var M=v(r).join(""),m=v(g).join(""),x=v(r,!0),w=new RegExp(m,"gi"),R=[],A;if(!g.length)return[];for(;A=w.exec(M);)R.push(A.index);function E(S){for(var J=0,O=0;J<x.length;++J)if(O+=x[J].length,S<O)return J}function b(S){for(var J=0,O=0;J<x.length;++J)if(O+=x[J].length,S+m.length<=O)return J}return R.map(function(S){return[E(S),b(S)]})};function H(r){this.string=r,this.disassembled=v(r).join("")}H.prototype.search=function(r){return v(r).join("").indexOf(this.disassembled)};var te=function(r){typeof r=="object"&&(r=r.join(""));var g=r.charCodeAt(r.length-1);if(V(g)){g-=n;var M=g%28;if(M>0)return!0}else if(z(g))return!0;return!1},ae=function(r,g){return v(r).pop()===g},Ee={disassemble:v,d:v,disassembleToString:se,ds:se,assemble:ee,a:ee,search:X,rangeSearch:je,Searcher:H,endsWithConsonant:te,endsWith:ae,isHangul:function(r){return typeof r=="string"&&(r=r.charCodeAt(0)),V(r)},isComplete:function(r){return typeof r=="string"&&(r=r.charCodeAt(0)),V(r)},isConsonant:function(r){return typeof r=="string"&&(r=r.charCodeAt(0)),z(r)},isVowel:function(r){return typeof r=="string"&&(r=r.charCodeAt(0)),L(r)},isCho:function(r){return typeof r=="string"&&(r=r.charCodeAt(0)),k(r)},isJong:function(r){return typeof r=="string"&&(r=r.charCodeAt(0)),Z(r)},isHangulAll:function(r){if(typeof r!="string")return!1;for(var g=0;g<r.length;g++)if(!V(r.charCodeAt(g)))return!1;return!0},isCompleteAll:function(r){if(typeof r!="string")return!1;for(var g=0;g<r.length;g++)if(!V(r.charCodeAt(g)))return!1;return!0},isConsonantAll:function(r){if(typeof r!="string")return!1;for(var g=0;g<r.length;g++)if(!z(r.charCodeAt(g)))return!1;return!0},isVowelAll:function(r){if(typeof r!="string")return!1;for(var g=0;g<r.length;g++)if(!L(r.charCodeAt(g)))return!1;return!0},isChoAll:function(r){if(typeof r!="string")return!1;for(var g=0;g<r.length;g++)if(!k(r.charCodeAt(g)))return!1;return!0},isJongAll:function(r){if(typeof r!="string")return!1;for(var g=0;g<r.length;g++)if(!Z(r.charCodeAt(g)))return!1;return!0}};typeof define=="function"&&define.amd?define(function(){return Ee}):typeof He!="undefined"?He.exports=Ee:window.Hangul=Ee})()});var Kt={};rt(Kt,{default:()=>we});module.exports=at(Kt);var F=require("obsidian");var T=require("obsidian"),Ke={fuzzyThreshold:.4,overrideQuickSwitcher:!0,indexContent:!0,maxResults:50,showFileSize:!0,showModifiedTime:!0,showScore:!1,enableAutoIndex:!0},he=class extends T.PluginSettingTab{constructor(e,n){super(e,n);this.plugin=n}display(){let{containerEl:e}=this;e.empty(),e.createEl("h1",{text:"\u{1F50D} Korean Search Settings"}),e.createEl("p",{text:"Omnisearch replacement with Korean language support",cls:"setting-item-description"}),e.createEl("h2",{text:"Search Configuration"}),new T.Setting(e).setName("Fuzzy search threshold").setDesc("Controls search sensitivity (0 = exact match, 1 = very loose match)").addSlider(c=>c.setLimits(0,1,.1).setValue(this.plugin.settings.fuzzyThreshold).setDynamicTooltip().onChange(async h=>{this.plugin.settings.fuzzyThreshold=h,await this.plugin.saveSettings(),this.plugin.index.updateThreshold(h)})).addText(c=>c.setValue(this.plugin.settings.fuzzyThreshold.toString()).onChange(async h=>{let d=parseFloat(h);!isNaN(d)&&d>=0&&d<=1&&(this.plugin.settings.fuzzyThreshold=d,await this.plugin.saveSettings(),this.plugin.index.updateThreshold(d))})),new T.Setting(e).setName("Maximum search results").setDesc("Limit the number of results shown (higher = slower)").addSlider(c=>c.setLimits(10,100,10).setValue(this.plugin.settings.maxResults).setDynamicTooltip().onChange(async h=>{this.plugin.settings.maxResults=h,await this.plugin.saveSettings()})),new T.Setting(e).setName("Index file content").setDesc("Search inside file content (not just filenames). May slow down indexing.").addToggle(c=>c.setValue(this.plugin.settings.indexContent).onChange(async h=>{this.plugin.settings.indexContent=h,await this.plugin.saveSettings(),new T.Notice("\u{1F4A1} Consider rebuilding the index after changing this setting",5e3)})),e.createEl("h2",{text:"Interface Settings"}),new T.Setting(e).setName("Override Quick Switcher").setDesc("Replace default Quick Switcher (Cmd/Ctrl+O) with Korean search").addToggle(c=>c.setValue(this.plugin.settings.overrideQuickSwitcher).onChange(async h=>{this.plugin.settings.overrideQuickSwitcher=h,await this.plugin.saveSettings();let d=e.createDiv({text:"\u26A0\uFE0F Please restart Obsidian for this change to take effect.",cls:"setting-item-description mod-warning"});setTimeout(()=>d.remove(),5e3)})),new T.Setting(e).setName("Show file size").setDesc("Display file size in search results").addToggle(c=>c.setValue(this.plugin.settings.showFileSize).onChange(async h=>{this.plugin.settings.showFileSize=h,await this.plugin.saveSettings()})),new T.Setting(e).setName("Show modified time").setDesc("Display last modified time in search results").addToggle(c=>c.setValue(this.plugin.settings.showModifiedTime).onChange(async h=>{this.plugin.settings.showModifiedTime=h,await this.plugin.saveSettings()})),new T.Setting(e).setName("Show search score").setDesc("Display relevance score in results (for debugging)").addToggle(c=>c.setValue(this.plugin.settings.showScore).onChange(async h=>{this.plugin.settings.showScore=h,await this.plugin.saveSettings()})),e.createEl("h2",{text:"Performance Settings"}),new T.Setting(e).setName("Auto-rebuild index").setDesc("Automatically update index when files are created, modified, or deleted").addToggle(c=>c.setValue(this.plugin.settings.enableAutoIndex).onChange(async h=>{this.plugin.settings.enableAutoIndex=h,await this.plugin.saveSettings()})),e.createEl("h2",{text:"Index Management"});let n=e.createDiv({cls:"setting-item"});n.createDiv({text:`\u{1F4CA} Currently indexed: ${this.plugin.index.getIndexedCount()} files`,cls:"setting-item-name"}),new T.Setting(e).setName("Rebuild search index").setDesc("Manually rebuild the entire search index").addButton(c=>c.setButtonText("Rebuild Index").setClass("mod-cta").onClick(async()=>{c.setButtonText("Rebuilding..."),c.setDisabled(!0);try{await this.plugin.index.build(),new T.Notice(`\u2705 Index rebuilt! (${this.plugin.index.getIndexedCount()} files)`,3e3),n.querySelector(".setting-item-name").textContent=`\u{1F4CA} Currently indexed: ${this.plugin.index.getIndexedCount()} files`}catch(h){new T.Notice("\u274C Failed to rebuild index - check console",5e3),console.error("Failed to rebuild index:",h)}finally{c.setButtonText("Rebuild Index"),c.setDisabled(!1)}})),new T.Setting(e).setName("Clear search index").setDesc("Remove all indexed data (will need to rebuild)").addButton(c=>c.setButtonText("Clear Index").setClass("mod-warning").onClick(()=>{this.plugin.index.clear(),new T.Notice("\u{1F5D1}\uFE0F Index cleared",2e3),n.querySelector(".setting-item-name").textContent="\u{1F4CA} Currently indexed: 0 files"}));let a=new T.Setting(e).setName("Korean Search Examples").setDesc("Try these search patterns:").settingEl.createDiv({cls:"hangul-search-examples"}).createEl("ul");a.createEl("li").innerHTML='<strong>\uCD08\uC131 \uAC80\uC0C9:</strong> "\u314E\u3131" \u2192 finds "\uD55C\uAE00", "\uD56D\uACF5", "\uD559\uAD50"',a.createEl("li").innerHTML='<strong>\uBD80\uBD84 \uC74C\uC808:</strong> "\uD55C\u3131" \u2192 finds "\uD55C\uAD6D", "\uD55C\uAE00"',a.createEl("li").innerHTML='<strong>\uD63C\uD569 \uAC80\uC0C9:</strong> "\u314E\u3131\u3139\uAD50" \u2192 finds "\uD55C\uAE00\uD559\uAD50"',a.createEl("li").innerHTML="<strong>\uB0B4\uC6A9 \uAC80\uC0C9:</strong> Searches file content too",a.createEl("li").innerHTML="<strong>\uC601\uC5B4 \uAC80\uC0C9:</strong> Regular English search also works",e.createEl("h2",{text:"Keyboard Shortcuts"});let u=e.createDiv({cls:"hangul-search-examples"}).createEl("ul");u.createEl("li").innerHTML="<strong>Ctrl/Cmd + Shift + O:</strong> Open Korean Search",u.createEl("li").innerHTML="<strong>Ctrl/Cmd + O:</strong> Quick Switcher (if override enabled)",u.createEl("li").innerHTML="<strong>Ctrl + Enter:</strong> Open in new tab",u.createEl("li").innerHTML="<strong>Shift + Enter:</strong> Open in new pane"}};function U(i){return Array.isArray?Array.isArray(i):Ue(i)==="[object Array]"}var ct=1/0;function lt(i){if(typeof i=="string")return i;let t=i+"";return t=="0"&&1/i==-ct?"-0":t}function ht(i){return i==null?"":lt(i)}function W(i){return typeof i=="string"}function We(i){return typeof i=="number"}function ut(i){return i===!0||i===!1||dt(i)&&Ue(i)=="[object Boolean]"}function Ge(i){return typeof i=="object"}function dt(i){return Ge(i)&&i!==null}function j(i){return i!=null}function Ce(i){return!i.trim().length}function Ue(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}var gt="Incorrect 'index' type",ft=i=>`Invalid value for key ${i}`,pt=i=>`Pattern length exceeds max of ${i}.`,mt=i=>`Missing ${i} property in key`,xt=i=>`Property 'weight' in key '${i}' must be a positive integer`,Pe=Object.prototype.hasOwnProperty,be=class{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach(n=>{let s=Qe(n);e+=s.weight,this._keys.push(s),this._keyMap[s.id]=s,e+=s.weight}),this._keys.forEach(n=>{n.weight/=e})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function Qe(i){let t=null,e=null,n=null,s=1,o=null;if(W(i)||U(i))n=i,t=ze(i),e=ve(i);else{if(!Pe.call(i,"name"))throw new Error(mt("name"));let a=i.name;if(n=a,Pe.call(i,"weight")&&(s=i.weight,s<=0))throw new Error(xt(a));t=ze(a),e=ve(a),o=i.getFn}return{path:t,id:e,weight:s,src:n,getFn:o}}function ze(i){return U(i)?i:i.split(".")}function ve(i){return U(i)?i.join("."):i}function St(i,t){let e=[],n=!1,s=(o,a,l)=>{if(j(o))if(!a[l])e.push(o);else{let u=a[l],c=o[u];if(!j(c))return;if(l===a.length-1&&(W(c)||We(c)||ut(c)))e.push(ht(c));else if(U(c)){n=!0;for(let h=0,d=c.length;h<d;h+=1)s(c[h],a,l+1)}else a.length&&s(c,a,l+1)}};return s(i,W(t)?t.split("."):t,0),n?e:e[0]}var yt={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},wt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(i,t)=>i.score===t.score?i.idx<t.idx?-1:1:i.score<t.score?-1:1},Et={location:0,threshold:.6,distance:100},Ct={useExtendedSearch:!1,getFn:St,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},f={...wt,...yt,...Et,...Ct},bt=/[^ ]+/g;function vt(i=1,t=3){let e=new Map,n=Math.pow(10,t);return{get(s){let o=s.match(bt).length;if(e.has(o))return e.get(o);let a=1/Math.pow(o,.5*i),l=parseFloat(Math.round(a*n)/n);return e.set(o,l),l},clear(){e.clear()}}}var ie=class{constructor({getFn:t=f.getFn,fieldNormWeight:e=f.fieldNormWeight}={}){this.norm=vt(e,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((e,n)=>{this._keysMap[e.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,W(this.docs[0])?this.docs.forEach((t,e)=>{this._addString(t,e)}):this.docs.forEach((t,e)=>{this._addObject(t,e)}),this.norm.clear())}add(t){let e=this.size();W(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!j(t)||Ce(t))return;let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(t,e){let n={i:e,$:{}};this.keys.forEach((s,o)=>{let a=s.getFn?s.getFn(t):this.getFn(t,s.path);if(j(a)){if(U(a)){let l=[],u=[{nestedArrIndex:-1,value:a}];for(;u.length;){let{nestedArrIndex:c,value:h}=u.pop();if(j(h))if(W(h)&&!Ce(h)){let d={v:h,i:c,n:this.norm.get(h)};l.push(d)}else U(h)&&h.forEach((d,p)=>{u.push({nestedArrIndex:p,value:d})})}n.$[o]=l}else if(W(a)&&!Ce(a)){let l={v:a,n:this.norm.get(a)};n.$[o]=l}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}};function Xe(i,t,{getFn:e=f.getFn,fieldNormWeight:n=f.fieldNormWeight}={}){let s=new ie({getFn:e,fieldNormWeight:n});return s.setKeys(i.map(Qe)),s.setSources(t),s.create(),s}function Mt(i,{getFn:t=f.getFn,fieldNormWeight:e=f.fieldNormWeight}={}){let{keys:n,records:s}=i,o=new ie({getFn:t,fieldNormWeight:e});return o.setKeys(n),o.setIndexRecords(s),o}function ue(i,{errors:t=0,currentLocation:e=0,expectedLocation:n=0,distance:s=f.distance,ignoreLocation:o=f.ignoreLocation}={}){let a=t/i.length;if(o)return a;let l=Math.abs(n-e);return s?a+l/s:l?1:a}function At(i=[],t=f.minMatchCharLength){let e=[],n=-1,s=-1,o=0;for(let a=i.length;o<a;o+=1){let l=i[o];l&&n===-1?n=o:!l&&n!==-1&&(s=o-1,s-n+1>=t&&e.push([n,s]),n=-1)}return i[o-1]&&o-n>=t&&e.push([n,o-1]),e}var q=32;function Tt(i,t,e,{location:n=f.location,distance:s=f.distance,threshold:o=f.threshold,findAllMatches:a=f.findAllMatches,minMatchCharLength:l=f.minMatchCharLength,includeMatches:u=f.includeMatches,ignoreLocation:c=f.ignoreLocation}={}){if(t.length>q)throw new Error(pt(q));let h=t.length,d=i.length,p=Math.max(0,Math.min(n,d)),y=o,C=p,_=l>1||u,D=_?Array(d):[],K;for(;(K=i.indexOf(t,C))>-1;){let I=ue(t,{currentLocation:K,expectedLocation:p,distance:s,ignoreLocation:c});if(y=Math.min(I,y),C=K+h,_){let $=0;for(;$<h;)D[K+$]=1,$+=1}}C=-1;let z=[],k=1,L=h+d,Z=1<<h-1;for(let I=0;I<h;I+=1){let $=0,v=L;for(;$<v;)ue(t,{errors:I,currentLocation:p+v,expectedLocation:p,distance:s,ignoreLocation:c})<=y?$=v:L=v,v=Math.floor((L-$)/2+$);L=v;let se=Math.max(1,p-v+1),ee=a?d:Math.min(p+v,d)+h,X=Array(ee+2);X[ee+1]=(1<<I)-1;for(let H=ee;H>=se;H-=1){let te=H-1,ae=e[i.charAt(te)];if(_&&(D[te]=+!!ae),X[H]=(X[H+1]<<1|1)&ae,I&&(X[H]|=(z[H+1]|z[H])<<1|1|z[H+1]),X[H]&Z&&(k=ue(t,{errors:I,currentLocation:te,expectedLocation:p,distance:s,ignoreLocation:c}),k<=y)){if(y=k,C=te,C<=p)break;se=Math.max(1,2*p-C)}}if(ue(t,{errors:I+1,currentLocation:p,expectedLocation:p,distance:s,ignoreLocation:c})>y)break;z=X}let V={isMatch:C>=0,score:Math.max(.001,k)};if(_){let I=At(D,l);I.length?u&&(V.indices=I):V.isMatch=!1}return V}function It(i){let t={};for(let e=0,n=i.length;e<n;e+=1){let s=i.charAt(e);t[s]=(t[s]||0)|1<<n-e-1}return t}var de=class{constructor(t,{location:e=f.location,threshold:n=f.threshold,distance:s=f.distance,includeMatches:o=f.includeMatches,findAllMatches:a=f.findAllMatches,minMatchCharLength:l=f.minMatchCharLength,isCaseSensitive:u=f.isCaseSensitive,ignoreLocation:c=f.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:s,includeMatches:o,findAllMatches:a,minMatchCharLength:l,isCaseSensitive:u,ignoreLocation:c},this.pattern=u?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;let h=(p,y)=>{this.chunks.push({pattern:p,alphabet:It(p),startIndex:y})},d=this.pattern.length;if(d>q){let p=0,y=d%q,C=d-y;for(;p<C;)h(this.pattern.substr(p,q),p),p+=q;if(y){let _=d-q;h(this.pattern.substr(_),_)}}else h(this.pattern,0)}searchIn(t){let{isCaseSensitive:e,includeMatches:n}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let C={isMatch:!0,score:0};return n&&(C.indices=[[0,t.length-1]]),C}let{location:s,distance:o,threshold:a,findAllMatches:l,minMatchCharLength:u,ignoreLocation:c}=this.options,h=[],d=0,p=!1;this.chunks.forEach(({pattern:C,alphabet:_,startIndex:D})=>{let{isMatch:K,score:z,indices:k}=Tt(t,C,_,{location:s+D,distance:o,threshold:a,findAllMatches:l,minMatchCharLength:u,includeMatches:n,ignoreLocation:c});K&&(p=!0),d+=z,K&&k&&(h=[...h,...k])});let y={isMatch:p,score:p?d/this.chunks.length:1};return p&&n&&(y.indices=h),y}},G=class{constructor(t){this.pattern=t}static isMultiMatch(t){return Ve(t,this.multiRegex)}static isSingleMatch(t){return Ve(t,this.singleRegex)}search(){}};function Ve(i,t){let e=i.match(t);return e?e[1]:null}var Me=class extends G{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){let e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},Ae=class extends G{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){let n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}},Te=class extends G{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){let e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},Ie=class extends G{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){let e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},Fe=class extends G{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){let e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},_e=class extends G{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){let e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},ge=class extends G{constructor(t,{location:e=f.location,threshold:n=f.threshold,distance:s=f.distance,includeMatches:o=f.includeMatches,findAllMatches:a=f.findAllMatches,minMatchCharLength:l=f.minMatchCharLength,isCaseSensitive:u=f.isCaseSensitive,ignoreLocation:c=f.ignoreLocation}={}){super(t),this._bitapSearch=new de(t,{location:e,threshold:n,distance:s,includeMatches:o,findAllMatches:a,minMatchCharLength:l,isCaseSensitive:u,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}},fe=class extends G{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e=0,n,s=[],o=this.pattern.length;for(;(n=t.indexOf(this.pattern,e))>-1;)e=n+o,s.push([n,e-1]);let a=!!s.length;return{isMatch:a,score:a?0:1,indices:s}}},Le=[Me,fe,Te,Ie,_e,Fe,Ae,ge],Je=Le.length,Ft=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,_t="|";function Lt(i,t={}){return i.split(_t).map(e=>{let n=e.trim().split(Ft).filter(o=>o&&!!o.trim()),s=[];for(let o=0,a=n.length;o<a;o+=1){let l=n[o],u=!1,c=-1;for(;!u&&++c<Je;){let h=Le[c],d=h.isMultiMatch(l);d&&(s.push(new h(d,t)),u=!0)}if(!u)for(c=-1;++c<Je;){let h=Le[c],d=h.isSingleMatch(l);if(d){s.push(new h(d,t));break}}}return s})}var Ot=new Set([ge.type,fe.type]),Oe=class{constructor(t,{isCaseSensitive:e=f.isCaseSensitive,includeMatches:n=f.includeMatches,minMatchCharLength:s=f.minMatchCharLength,ignoreLocation:o=f.ignoreLocation,findAllMatches:a=f.findAllMatches,location:l=f.location,threshold:u=f.threshold,distance:c=f.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:n,minMatchCharLength:s,findAllMatches:a,ignoreLocation:o,location:l,threshold:u,distance:c},this.pattern=e?t:t.toLowerCase(),this.query=Lt(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){let e=this.query;if(!e)return{isMatch:!1,score:1};let{includeMatches:n,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let o=0,a=[],l=0;for(let u=0,c=e.length;u<c;u+=1){let h=e[u];a.length=0,o=0;for(let d=0,p=h.length;d<p;d+=1){let y=h[d],{isMatch:C,indices:_,score:D}=y.search(t);if(C){if(o+=1,l+=D,n){let K=y.constructor.type;Ot.has(K)?a=[...a,..._]:a.push(_)}}else{l=0,o=0,a.length=0;break}}if(o){let d={isMatch:!0,score:l/o};return n&&(d.indices=a),d}}return{isMatch:!1,score:1}}},Ne=[];function Nt(...i){Ne.push(...i)}function ke(i,t){for(let e=0,n=Ne.length;e<n;e+=1){let s=Ne[e];if(s.condition(i,t))return new s(i,t)}return new de(i,t)}var pe={AND:"$and",OR:"$or"},Re={PATH:"$path",PATTERN:"$val"},$e=i=>!!(i[pe.AND]||i[pe.OR]),kt=i=>!!i[Re.PATH],Rt=i=>!U(i)&&Ge(i)&&!$e(i),Be=i=>({[pe.AND]:Object.keys(i).map(t=>({[t]:i[t]}))});function Ye(i,t,{auto:e=!0}={}){let n=s=>{let o=Object.keys(s),a=kt(s);if(!a&&o.length>1&&!$e(s))return n(Be(s));if(Rt(s)){let u=a?s[Re.PATH]:o[0],c=a?s[Re.PATTERN]:s[u];if(!W(c))throw new Error(ft(u));let h={keyId:ve(u),pattern:c};return e&&(h.searcher=ke(c,t)),h}let l={children:[],operator:o[0]};return o.forEach(u=>{let c=s[u];U(c)&&c.forEach(h=>{l.children.push(n(h))})}),l};return $e(i)||(i=Be(i)),n(i)}function $t(i,{ignoreFieldNorm:t=f.ignoreFieldNorm}){i.forEach(e=>{let n=1;e.matches.forEach(({key:s,norm:o,score:a})=>{let l=s?s.weight:null;n*=Math.pow(a===0&&l?Number.EPSILON:a,(l||1)*(t?1:o))}),e.score=n})}function Ht(i,t){let e=i.matches;t.matches=[],j(e)&&e.forEach(n=>{if(!j(n.indices)||!n.indices.length)return;let{indices:s,value:o}=n,a={indices:s,value:o};n.key&&(a.key=n.key.src),n.idx>-1&&(a.refIndex=n.idx),t.matches.push(a)})}function jt(i,t){t.score=i.score}function Dt(i,t,{includeMatches:e=f.includeMatches,includeScore:n=f.includeScore}={}){let s=[];return e&&s.push(Ht),n&&s.push(jt),i.map(o=>{let{idx:a}=o,l={item:t[a],refIndex:a};return s.length&&s.forEach(u=>{u(o,l)}),l})}var Q=class{constructor(t,e={},n){this.options={...f,...e},this.options.useExtendedSearch,this._keyStore=new be(this.options.keys),this.setCollection(t,n)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof ie))throw new Error(gt);this._myIndex=e||Xe(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){j(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){let e=[];for(let n=0,s=this._docs.length;n<s;n+=1){let o=this._docs[n];t(o,n)&&(this.removeAt(n),n-=1,s-=1,e.push(o))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){let{includeMatches:n,includeScore:s,shouldSort:o,sortFn:a,ignoreFieldNorm:l}=this.options,u=W(t)?W(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return $t(u,{ignoreFieldNorm:l}),o&&u.sort(a),We(e)&&e>-1&&(u=u.slice(0,e)),Dt(u,this._docs,{includeMatches:n,includeScore:s})}_searchStringList(t){let e=ke(t,this.options),{records:n}=this._myIndex,s=[];return n.forEach(({v:o,i:a,n:l})=>{if(!j(o))return;let{isMatch:u,score:c,indices:h}=e.searchIn(o);u&&s.push({item:o,idx:a,matches:[{score:c,value:o,norm:l,indices:h}]})}),s}_searchLogical(t){let e=Ye(t,this.options),n=(l,u,c)=>{if(!l.children){let{keyId:d,searcher:p}=l,y=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(u,d),searcher:p});return y&&y.length?[{idx:c,item:u,matches:y}]:[]}let h=[];for(let d=0,p=l.children.length;d<p;d+=1){let y=l.children[d],C=n(y,u,c);if(C.length)h.push(...C);else if(l.operator===pe.AND)return[]}return h},s=this._myIndex.records,o={},a=[];return s.forEach(({$:l,i:u})=>{if(j(l)){let c=n(e,l,u);c.length&&(o[u]||(o[u]={idx:u,item:l,matches:[]},a.push(o[u])),c.forEach(({matches:h})=>{o[u].matches.push(...h)}))}}),a}_searchObjectList(t){let e=ke(t,this.options),{keys:n,records:s}=this._myIndex,o=[];return s.forEach(({$:a,i:l})=>{if(!j(a))return;let u=[];n.forEach((c,h)=>{u.push(...this._findMatches({key:c,value:a[h],searcher:e}))}),u.length&&o.push({idx:l,item:a,matches:u})}),o}_findMatches({key:t,value:e,searcher:n}){if(!j(e))return[];let s=[];if(U(e))e.forEach(({v:o,i:a,n:l})=>{if(!j(o))return;let{isMatch:u,score:c,indices:h}=n.searchIn(o);u&&s.push({score:c,key:t,value:o,idx:a,norm:l,indices:h})});else{let{v:o,n:a}=e,{isMatch:l,score:u,indices:c}=n.searchIn(o);l&&s.push({score:u,key:t,value:o,norm:a,indices:c})}return s}};Q.version="6.6.2";Q.createIndex=Xe;Q.parseIndex=Mt;Q.config=f;Q.parseQuery=Ye;Nt(Oe);var me=ot(Ze()),xe=class{constructor(t){this.plugin=t;this.entries=[];this.indexMap=new Map;this.defaultThreshold=.4}async build(){console.log("\u{1F50D} Building Korean search index...");let t=this.plugin.app.vault.getMarkdownFiles();this.entries=[],this.indexMap.clear();let e=0;for(let n of t)try{await this.addFile(n),e++}catch(s){console.warn(`Failed to index ${n.path}:`,s)}this.rebuildFuse(),console.log(`\u2705 Indexed ${e} files with Korean search support`)}async addFile(t){if(!(!t||t.extension!=="md"))try{let e=await this.plugin.app.vault.cachedRead(t),n=await this.createEntry(t,e);this.indexMap.has(t.path)&&this.removeFile(t),this.entries.push(n),this.indexMap.set(t.path,n),this.rebuildFuse()}catch(e){console.warn(`Failed to add file ${t.path}:`,e)}}removeFile(t){let e=this.indexMap.get(t.path);if(!e)return;let n=this.entries.indexOf(e);n>-1&&(this.entries.splice(n,1),this.indexMap.delete(t.path),this.rebuildFuse())}async updateFile(t){!t||t.extension!=="md"||(this.removeFile(t),await this.addFile(t))}updateOnRename(t,e){this.indexMap.get(e)&&(this.removeFile({path:e}),this.addFile(t))}search(t,e=50){if(!t.trim())return[];console.log(`\u{1F50D} Searching for: "${t}"`);let n=me.default.disassemble(t).join("");console.log(`\u{1F50D} Decomposed query: "${n}"`),this.fuse||(console.warn("\u26A0\uFE0F Search index not ready, rebuilding..."),this.rebuildFuse());let s=this.fuse.search(n,{limit:e});return console.log(`\u{1F50D} Found ${s.length} results for "${t}"`),s.map(o=>({...o.item,score:this.calculateRelevanceScore(o.item,t,o.score||0)})).sort((o,a)=>a.score-o.score).slice(0,e)}updateThreshold(t){try{this.plugin.settings&&(this.plugin.settings.fuzzyThreshold=t),this.rebuildFuse()}catch(e){console.warn("Could not update plugin settings, using default threshold"),this.rebuildFuse()}}getIndexedCount(){return this.entries.length}clear(){this.entries=[],this.indexMap.clear(),this.rebuildFuse()}async createEntry(t,e){let n=t.basename,s=t.path,o=e.split(`
`).slice(0,3).join(" ").substring(0,200),a=me.default.disassemble(n).join(""),l=me.default.disassemble(e).join("");return{display:n,jamo:a,path:s,content:o,contentJamo:l,score:0,size:e.length,mtime:t.stat.mtime}}calculateRelevanceScore(t,e,n){let s=1-n,o=e.toLowerCase(),a=t.display.toLowerCase();return a===o?s+=10:a.includes(o)&&(s+=5),t.content.toLowerCase().includes(o)&&(s+=2),(Date.now()-t.mtime)/(1e3*60*60*24)<7&&(s+=1),t.size<1e3&&(s+=.5),s}rebuildFuse(){var t;try{let e=((t=this.plugin.settings)==null?void 0:t.fuzzyThreshold)||this.defaultThreshold;this.fuse=new Q(this.entries,{threshold:e,keys:[{name:"jamo",weight:.4},{name:"display",weight:.3},{name:"contentJamo",weight:.2},{name:"content",weight:.1}],includeScore:!0,minMatchCharLength:1,ignoreLocation:!0}),console.log(`\u{1F527} Fuse.js index rebuilt with threshold: ${e}`)}catch(e){console.error("\u274C Failed to rebuild Fuse index:",e)}}};var re=require("obsidian"),oe=class extends re.SuggestModal{constructor(e,n){super(e);this.index=n;this.setPlaceholder("\u{1F50D} Korean Search: Try \u314E\u3131, \uD55C\u3131, or \u314E\u3131\u3139\uAD50..."),this.setInstructions([{command:"\u2191\u2193",purpose:"to navigate"},{command:"\u21B5",purpose:"to open"},{command:"Ctrl \u21B5",purpose:"to open in new tab"},{command:"Shift \u21B5",purpose:"to open in new pane"},{command:"esc",purpose:"to dismiss"}])}getSuggestions(e){if(console.log(`\u{1F50D} HangulSwitcher.getSuggestions() called with query: "${e}"`),!e||e.trim().length===0){let s=this.getRecentFiles();return console.log(`\u{1F4C2} Showing ${s.length} recent files for empty query`),s}let n=this.index.search(e,50);return console.log(`\u2705 HangulSwitcher returning ${n.length} results for "${e}"`),n.length>0&&console.log("\u{1F4DD} First few results:",n.slice(0,3).map(s=>s.display)),n}renderSuggestion(e,n){console.log(`\u{1F3A8} Rendering suggestion: ${e.display}`),n.empty(),n.addClass("hangul-search-result");let s=n.createDiv({cls:"hangul-search-result-container"});s.createDiv({cls:"hangul-search-title"}).setText(e.display),e.path!==e.display&&s.createDiv({cls:"hangul-search-path"}).setText(e.path),e.content&&e.content.trim()&&s.createDiv({cls:"hangul-search-content"}).setText(e.content.substring(0,100)+"...");let a=s.createDiv({cls:"hangul-search-meta"}),l=this.formatFileSize(e.size);a.createSpan({cls:"hangul-search-size",text:l});let u=this.formatRelativeTime(e.mtime);a.createSpan({cls:"hangul-search-time",text:u}),e.score>0&&a.createSpan({cls:"hangul-search-score",text:`Score: ${e.score.toFixed(2)}`})}onChooseSuggestion(e,n){var l;let s=this.app.vault.getAbstractFileByPath(e.path);if(!(s instanceof re.TFile)){console.error(`\u274C File not found: ${e.path}`);return}let o=(n==null?void 0:n.ctrlKey)||(n==null?void 0:n.ctrlKey),a=(n==null?void 0:n.shiftKey)||(n==null?void 0:n.shiftKey);console.log(`\u{1F4C2} Opening file: ${e.path} (newLeaf: ${o}, newPane: ${a})`),a?this.app.workspace.getLeaf("split").openFile(s):o?this.app.workspace.getLeaf("tab").openFile(s):(l=this.app.workspace.activeLeaf)==null||l.openFile(s)}getRecentFiles(){try{return this.app.workspace.getLastOpenFiles().slice(0,10).map(n=>{let s=this.app.vault.getAbstractFileByPath(n);return s instanceof re.TFile?{display:s.basename,jamo:s.basename,path:s.path,content:"Recently opened file",contentJamo:"",score:0,size:s.stat.size,mtime:s.stat.mtime}:null}).filter(Boolean)}catch(e){return console.error("\u274C Error getting recent files:",e),[]}}formatFileSize(e){return e<1024?`${e}B`:e<1024*1024?`${(e/1024).toFixed(1)}KB`:`${(e/(1024*1024)).toFixed(1)}MB`}formatRelativeTime(e){let s=Date.now()-e,o=Math.floor(s/(1e3*60*60*24)),a=Math.floor(s/(1e3*60*60)),l=Math.floor(s/(1e3*60));return o>0?`${o}d ago`:a>0?`${a}h ago`:l>0?`${l}m ago`:"Just now"}};var ye=require("obsidian"),Se=class extends ye.EditorSuggest{constructor(e,n){super(e);this.index=n}onTrigger(e,n){let a=n.getLine(e.line).substring(0,e.ch).match(/\[\[([^\]]*?)$/);return a?{start:{line:e.line,ch:e.ch-a[1].length},end:e,query:a[1]}:null}getSuggestions(e){let n=e.query;return n?this.index.search(n,20):this.getRecentFiles()}renderSuggestion(e,n){let s=n.createDiv();s.createDiv({cls:"hangul-link-title"}).setText(e.display),e.path!==e.display&&s.createDiv({cls:"hangul-link-path"}).setText(e.path)}selectSuggestion(e){var h;let n=(h=this.context)==null?void 0:h.editor;if(!n)return;let s=n.getCursor(),l=n.getLine(s.line).substring(0,s.ch).match(/\[\[([^\]]*?)$/);if(!l)return;let u=s.ch-l[1].length,c=s.ch;n.replaceRange(e.display+"]]",{line:s.line,ch:u},{line:s.line,ch:c})}getRecentFiles(){return this.app.workspace.getLastOpenFiles().slice(0,10).map(n=>{let s=this.app.vault.getAbstractFileByPath(n);return s instanceof ye.TFile?{display:s.basename,jamo:s.basename,path:s.path,content:"Recently opened file",contentJamo:"",score:0,size:s.stat.size,mtime:s.stat.mtime}:null}).filter(Boolean)}};var we=class extends F.Plugin{async onload(){console.log("\u{1F525} Korean Search Plugin: Starting to load...");try{await this.loadSettings(),console.log("\u2705 Settings loaded successfully"),this.index=new xe(this),console.log("\u2705 Search index initialized"),this.addCoreCommands(),console.log("\u2705 Core commands added"),this.buildIndexAsync(),this.registerVaultEvents(),console.log("\u2705 Vault events registered"),this.registerEditorSuggest(new Se(this.app,this.index)),console.log("\u2705 Korean link suggestions registered"),this.addSettingTab(new he(this.app,this)),console.log("\u2705 Settings tab added"),new F.Notice("\u{1F389} Korean Search loaded! Try Cmd/Ctrl+Shift+O to search",4e3),console.log("\u{1F389} Korean Search Plugin loaded successfully!")}catch(e){console.error("\u274C Error loading Korean Search Plugin:",e),new F.Notice("\u274C Failed to load Korean Search Plugin - check console",5e3)}}addCoreCommands(){this.addCommand({id:"korean-search",name:"Korean Search (Test Korean patterns here!)",hotkeys:[{modifiers:["Mod","Shift"],key:"o"}],callback:()=>{try{console.log("\u{1F50D} Opening Korean Search..."),new oe(this.app,this.index).open()}catch(e){console.error("\u274C Error opening Korean Search:",e),new F.Notice("\u274C Error opening Korean Search - check console")}}}),this.addCommand({id:"korean-search-test",name:"Test Korean Search Now!",callback:()=>{new F.Notice("\u{1F50D} Try these patterns: \u314E\u3131 (\uCD08\uC131), \uD55C\u3131 (\uBD80\uBD84), \u314E\u3131\u3139\uAD50 (\uD63C\uD569)",5e3),new oe(this.app,this.index).open()}}),this.addCommand({id:"hangul-rebuild-index",name:"Rebuild Korean Search Index",callback:async()=>{let e=new F.Notice("\u{1F504} Rebuilding Korean search index...",0);try{await this.index.build(),e.hide(),new F.Notice(`\u2705 Korean index rebuilt! Found ${this.index.getIndexedCount()} files`,3e3)}catch(n){e.hide(),console.error("\u274C Failed to rebuild index:",n),new F.Notice("\u274C Failed to rebuild index - check console",5e3)}}}),this.addCommand({id:"korean-search-help",name:"Korean Search Help & Examples",callback:()=>{let e=`\u{1F50D} Korean Search Help:

\u{1F4DD} Try these patterns:
\u2022 \u314E\u3131 \u2192 finds \uD55C\uAE00, \uD56D\uACF5, \uD559\uAD50
\u2022 \uD55C\u3131 \u2192 finds \uD55C\uAD6D, \uD55C\uAE00  
\u2022 \u314E\u3131\u3139\uAD50 \u2192 finds \uD55C\uAE00\uD559\uAD50

\u2328\uFE0F Shortcuts:
\u2022 Cmd/Ctrl+Shift+O: Open search
\u2022 \u2191\u2193: Navigate results
\u2022 Enter: Open file
\u2022 Ctrl+Enter: New tab
\u2022 Shift+Enter: New pane

Currently indexed: ${this.index.getIndexedCount()} files`;new F.Notice(e,8e3)}})}async buildIndexAsync(){try{console.log("\u{1F50D} Building Korean search index..."),await this.index.build(),console.log(`\u2705 Korean search index built: ${this.index.getIndexedCount()} files indexed`),new F.Notice(`\u2705 Korean search ready! ${this.index.getIndexedCount()} files indexed`,3e3)}catch(e){console.error("\u274C Failed to build search index:",e),new F.Notice("\u274C Failed to build search index - check console",5e3)}}registerVaultEvents(){this.settings.enableAutoIndex&&(this.registerEvent(this.app.vault.on("create",e=>{e instanceof F.TFile&&e.extension==="md"&&this.index.addFile(e)})),this.registerEvent(this.app.vault.on("delete",e=>{e instanceof F.TFile&&this.index.removeFile(e)})),this.registerEvent(this.app.vault.on("rename",(e,n)=>{e instanceof F.TFile&&this.index.updateOnRename(e,n)})),this.registerEvent(this.app.vault.on("modify",e=>{e instanceof F.TFile&&e.extension==="md"&&this.index.updateFile(e)})))}onunload(){console.log("\u{1F44B} Korean Search Plugin: Unloading...")}async loadSettings(){this.settings=Object.assign({},Ke,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}getSearchIndex(){return this.index}search(e){return this.index.search(e)}};
